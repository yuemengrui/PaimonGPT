"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{18039:function(e,t,n){n.d(t,{B:function(){return a}});var r=n(13650);async function a(){let e={method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")}},t=await (0,r.d)("/ai/llm/list",e);return(console.log("llm list response",t),t)?t.data:[]}},72194:function(e,t,n){n.d(t,{Bv:function(){return i},D6:function(){return u},If:function(){return l},SE:function(){return c},Yk:function(){return a},xs:function(){return s},zM:function(){return o}});var r=n(13650);async function a(){let e={method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")}},t=await (0,r.d)("/ai/kb/list",e);return(console.log("response",t),t)?t.list:[]}async function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({name:e,embedding_model:t,description:n})};return await (0,r.d)("/ai/kb/create",a)}async function o(e){let t={method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({kb_id:e})};return await (0,r.d)("/ai/kb/delete",t)}async function l(e){let t={method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({kb_id:e})},n=await (0,r.d)("/ai/kb/file/list",t);return(console.log("response",n),n)?n.list:[]}async function s(e,t,n){let a={method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({kb_id:e,method_id:t,files:n})};console.log("response",await (0,r.d)("/ai/kb/file/import",a))}async function c(e){let t={method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({file_id:e})},n=await (0,r.d)("/ai/kb/file/chunks",t);return(console.log("response",n),n)?n.list:[]}async function u(e){let t={method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({data_id:e})};return await (0,r.d)("/ai/kb/file/delete",t)}},90293:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var r=n(57437),a=n(26621),i=n(211),o=n(2265),l=n(56641),s=n(93309),c=n(74261),u=n(9304),d=n(18039),m=n(72194),p=n(65328),h=n(73623);function f(e){let{appInfo:t,setAppInfo:n}=e,i=(0,h.p)(),f=[];t.kbs.map(e=>f.push(e.name));let[g,x]=(0,o.useState)([]),[y,v]=(0,o.useState)([]),[b,j]=(0,o.useState)(t.name),[w,N]=(0,o.useState)(t.description),[k,S]=(0,o.useState)(t.llm_name),[_,C]=(0,o.useState)(f);async function O(){let e=[];_.length>0&&_.map(t=>{let n=y.filter(e=>e.name===t)[0];e.push(n)});let r=await (0,p.YC)(t.id,b,w,k,e);r?r.errmsg?i({title:"保存失败",description:r.errmsg,status:"error",position:"top",duration:2e3}):(i({title:"保存成功",status:"success",position:"top",duration:2e3}),n({...t,name:b,llm_name:k})):i({title:"保存失败",status:"error",position:"top",duration:2e3})}return(0,o.useEffect)(()=>{(async function(){let e=await (0,d.B)();e&&e.length>0&&x(e);let t=await (0,m.Yk)();t&&t.length>0&&v(t)})()},[]),(0,r.jsxs)("div",{className:"w-full flex flex-1 px-6 py-6 flex-col ml-12 mt-12",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(a.k,{gap:20,alignItems:"center",children:[(0,r.jsx)("div",{className:"text-lg",children:"应用名称"}),(0,r.jsx)("input",{className:"border border-gray-200 rounded w-[256px] h-[40px] indent-4 text-lg",maxLength:32,value:b,onChange:e=>{"\n"!==e.target.value&&j(e.target.value)}})]})}),(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsxs)(a.k,{gap:20,alignItems:"center",children:[(0,r.jsx)("div",{className:"text-lg",children:"应用描述"}),(0,r.jsx)("input",{className:"border border-gray-200 rounded w-[256px] h-[40px] indent-4 text-lg",maxLength:32,value:w,onChange:e=>{"\n"!==e.target.value&&N(e.target.value)}})]})}),(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsxs)(a.k,{gap:20,alignItems:"center",children:[(0,r.jsx)("div",{className:"text-lg",children:"应用类型"}),(0,r.jsx)("div",{children:"自建应用"})]})}),(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsxs)(a.k,{gap:20,alignItems:"center",children:[(0,r.jsx)("div",{className:"text-lg",children:"大模型"}),(0,r.jsx)("div",{className:"ml-[20px]",children:(0,r.jsx)(l.P,{w:"256px",onChange:e=>{S(e.target.value)},value:k,children:g.map(e=>(0,r.jsx)("option",{children:e.model_name},e.model_name))})})]})}),(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsxs)(a.k,{gap:20,alignItems:"center",children:[(0,r.jsx)("div",{className:"text-lg",children:"关联知识库"}),(0,r.jsx)(s.c,{onChange:e=>C(e),defaultValue:_,children:(0,r.jsx)(c.K,{spacing:5,direction:"column",children:y.map(e=>(0,r.jsx)(u.X,{value:e.name,children:e.name},e.id))})})]})}),(0,r.jsx)("button",{onClick:O,className:"w-[128px] h-[40px] bg-blue-400/90 text-white rounded-lg ml-[160px] mt-12 border hover:bg-blue-400 hover:shadow-[0_0_2px_2px_rgba(147,197,253,0.6)]",children:"保存"})]})}function g(e){let{appInfo:t,setAppInfo:n}=e,l=[{name:"配置"}],[s,c]=(0,o.useState)(l[0].name);return(0,r.jsx)("div",{className:"flex w-full bg-blue-50/30",children:(0,r.jsxs)("div",{className:"flex flex-1 border border-gray-200 bg-white rounded-3xl mt-4 mr-4 ml-4 mb-4",children:[(0,r.jsxs)("div",{className:"w-[156px] rounded-l-3xl",children:[(0,r.jsxs)(a.k,{alignItems:"center",mt:6,ml:4,children:[(0,r.jsx)("div",{className:"text-3xl border rounded-lg border-gray-100 shadow-[2px_2px_2px_2px_rgba(0,0,0,0.2)]",children:(0,r.jsx)(i.Cp6,{})}),(0,r.jsx)("div",{className:"ml-2",children:t.name})]}),(0,r.jsx)(a.k,{mt:8,direction:"column",gap:2,alignItems:"center",children:l.map(e=>(0,r.jsx)("button",{className:"".concat(s===e.name?"shadow-[0_0_1px_1px_rgba(244,114,182,0.2)] text-pink-400 bg-pink-100":"hover:text-pink-300 hover:bg-blue-100"," w-[128px] rounded-md py-1"),onClick:()=>{c(e.name)},children:e.name},e.name))})]}),(0,r.jsx)("div",{className:"w-[1px] h-full bg-gray-200"}),t.id&&(0,r.jsx)(f,{appInfo:t,setAppInfo:n})]})})}},91172:function(e,t,n){n.d(t,{w_:function(){return s}});var r=n(2265),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=r.createContext&&r.createContext(a),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function s(e){return function(t){return r.createElement(c,o({attr:o({},e.attr)},t),function e(t){return t&&t.map(function(t,n){return r.createElement(t.tag,o({key:n},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var n,a=e.attr,i=e.size,s=e.title,c=l(e,["attr","size","title"]),u=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:n,style:o(o({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==i?r.createElement(i.Consumer,null,function(e){return t(e)}):t(a)}},26621:function(e,t,n){n.d(t,{k:function(){return o}});var r=n(58250),a=n(82184),i=n(57437),o=(0,r.G)(function(e,t){let{direction:n,align:r,justify:o,wrap:l,basis:s,grow:c,shrink:u,...d}=e;return(0,i.jsx)(a.m.div,{ref:t,__css:{display:"flex",flexDirection:n,alignItems:r,justifyContent:o,flexWrap:l,flexBasis:s,flexGrow:c,flexShrink:u},...d})});o.displayName="Flex"},45663:function(e,t,n){n.d(t,{lq:function(){return a},qq:function(){return i}});var r=n(2265);function a(...e){return t=>{e.forEach(e=>{!function(e,t){if(null!=e){if("function"==typeof e){e(t);return}try{e.current=t}catch(n){throw Error(`Cannot assign value '${t}' to ref '${e}'`)}}}(e,t)})}}function i(...e){return(0,r.useMemo)(()=>a(...e),e)}},73623:function(e,t,n){n.d(t,{p:function(){return l}});var r=n(6161),a=n(8936),i=n(12704),o=n(2265);function l(e){let{theme:t}=(0,i.uP)(),n=(0,r.OX)();return(0,o.useMemo)(()=>(0,a.Cj)(t.direction,{...n,...e}),[e,t.direction,n])}}}]);