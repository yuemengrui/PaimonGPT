"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3378],{32376:function(e,r,s){var t=s(57437);s(2265),r.Z=e=>{let{children:r,...s}=e;return(0,t.jsx)("div",{className:"bg-gray-50 border rounded-lg border-gray-100 shadow-[0_0_1px_1px_rgba(0,0,0,0.1)] px-0.5 py-0.5 hover:bg-orange-50 hover:text-red-400",...s,children:r})}},6806:function(e,r,s){s.d(r,{Z:function(){return c}});var t=s(57437),n=s(72279),l=s(89348),a=s(88920),i=s(45470),o=s(2265);function c(e){let{stream_generate:r}=e,[s,c]=(0,o.useState)("");return(0,t.jsx)("div",{className:"absolute bottom-6 inset-x-0",children:(0,t.jsx)("div",{className:"w-full max-w-4xl mx-auto flex flex-col items-center px-4 space-y-4",children:(0,t.jsxs)("div",{className:"flex items-end w-full border border-back/10 bg-blue-100 rounded-lg shadow-[0_0_15px_rgba(0,0,0,0.1)] py-2",children:[(0,t.jsx)("div",{className:"mx-3 mb-2.5",children:(0,t.jsx)(l.RHh,{})}),(0,t.jsx)(i.Z,{className:"outline-none flex-1 max-h-64 mb-1.5 bg-transparent text-black resize-none border-0",placeholder:"输入一条消息...",rows:1,value:s,maxLength:32768,onKeyDown:function(e){e.metaKey&&"Enter"===e.code?c(s+"\n"):"Enter"===e.code&&s&&(r(s),c(""))},onChange:e=>{"\n"!==e.target.value&&c(e.target.value)}}),(0,t.jsx)(n.Z,{className:"mx-3 !rounded-lg text-blue-500",icon:a.LbG,disabled:""===s.trim(),variant:"primary",onClick:()=>r(s)})]})})})}},73342:function(e,r,s){s.d(r,{Z:function(){return S}});var t=s(57437),n=s(32721),l=s(211),a=s(2265),i=s(37600),o=s(26621),c=s(71504),x=s(19734),d=s(85686),h=s(19241),u=s(24606),g=s(41697),p=s(77267),j=s(32376),b=s(30954),m=s(76526),y=s(72647),v=s(3391),f=s(81629),Z=s(4159),w=s(88610),k=s(58491);s(10905);var _=s(16691),C=s.n(_),N=s(73623);function S(e){let{messageList:r,stream_generate:s,waitingReply:_}=e,S=(0,N.p)(),[R,z]=(0,a.useState)(!1),[D,E]=(0,a.useState)({}),[M,Q]=(0,a.useState)(!1),A=(0,a.useRef)(null),[H,I]=(0,a.useState)(!1),[O,T]=(0,a.useState)("");async function q(e){"clipboard"in navigator?await navigator.clipboard.writeText(e):document.execCommand("copy",!0,e),S({title:"复制成功",status:"success",position:"top",duration:2e3})}function F(){Q(!0)}return(0,a.useEffect)(()=>{A.current&&(A.current.scrollTop=A.current.scrollHeight)},[r]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-full mx-auto",children:(0,t.jsx)("ul",{ref:A,style:{maxHeight:"calc(100vh - 230px)"},className:"overflow-auto",children:r.map(e=>{let r="assistant"===e.role;return(0,t.jsxs)("li",{className:"".concat(r?"justify-start":"justify-end"," w-full mx-auto flex space-x-6 px-6 py-6"),children:["user"===e.role&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,t.jsxs)(o.k,{gap:3,w:"100%",alignItems:"center",justifyContent:"flex-end",children:["text"===e.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{label:"复制",children:(0,t.jsx)(j.Z,{onClick:()=>q(e.content),children:(0,t.jsx)(d.pDe,{})})}),(0,t.jsx)(x.Z,{label:"重新生成",children:(0,t.jsx)(j.Z,{onClick:()=>s(e.content),children:(0,t.jsx)(u.cAs,{})})})]}),(0,t.jsx)(x.Z,{label:"删除",children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(h.qy0,{})})}),(0,t.jsx)("div",{className:"text-3xl shadow-[0_0_1px_1px_rgba(0,0,0,0.2)] bg-white border rounded-lg border-gray-100",children:"\uD83D\uDE0A"})]})}),"image"===e.type?(0,t.jsx)(C(),{src:e.url,alt:"image",width:e.width||600,height:e.height||600}):(0,t.jsx)("div",{className:"bg-blue-100 rounded-lg shadow-[0_2px_2px_2px_rgba(96,165,250,0.3)] text-sm mt-3 text-right px-2 py-2 max-w-fit ml-auto",children:(0,t.jsx)(n.Z,{children:e.content})})]}),"assistant"===e.role&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,t.jsxs)(o.k,{gap:3,w:"100%",alignItems:"center",justifyContent:"flex-start",children:[(0,t.jsx)("div",{className:"text-3xl bg-white border rounded-lg border-gray-100 shadow-[0_0_1px_1px_rgba(0,0,0,0.2)]",children:(0,t.jsx)(l.Cp6,{className:_?"animate-spin":""})}),(0,t.jsx)(x.Z,{label:"复制",children:(0,t.jsx)(j.Z,{onClick:()=>q(e.content),children:(0,t.jsx)(d.pDe,{})})}),(0,t.jsx)(x.Z,{label:"删除",children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(h.qy0,{})})}),(0,t.jsx)(x.Z,{label:"标注预期答案",children:(0,t.jsx)(j.Z,{onClick:F,children:(0,t.jsx)(g.lJM,{})})}),(0,t.jsx)(x.Z,{label:"给本次回答打个分",children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(p.Q$h,{})})})]})}),"image"===e.type?(0,t.jsx)(C(),{src:e.url,alt:"image",width:e.width||600,height:e.height||600}):(0,t.jsxs)("div",{className:"bg-pink-100 rounded-lg shadow-[0_2px_2px_2px_rgba(244,114,182,0.3)] text-sm mt-3 px-2 py-2",children:[(0,t.jsx)(n.Z,{children:e.content}),(0,t.jsxs)(o.k,{alignItems:"center",mt:"4",flexWrap:"wrap",gap:"2",children:[(0,t.jsx)(x.Z,{label:"本次回答所关联的上下文对数",children:(0,t.jsx)(i.Z,{text:"".concat(e.response.history?e.response.history.length:0,"对上下文")})}),(0,t.jsx)(x.Z,{label:"知识库中的引用",children:(0,t.jsx)(i.Z,{text:"".concat(e.response.retrieval?e.response.retrieval.sources_len:0,"条引用"),onClick:()=>{T(e.response.retrieval.sources),I(!0)}})}),(0,t.jsx)(x.Z,{label:"本次请求总共使用的token数量",children:(0,t.jsx)(i.Z,{text:"".concat(e.response.usage?e.response.usage.total_tokens:0," tokens")})}),(0,t.jsx)(x.Z,{label:"本次请求所用时间",children:(0,t.jsx)(i.Z,{text:"".concat(e.response.time_cost?e.response.time_cost.total:"0s")})}),e.response.retrieval&&e.response.retrieval.MultiQueryRetriever&&(0,t.jsx)(x.Z,{label:"MultiQueryRetriever",children:(0,t.jsx)(i.Z,{text:"MultiQueryRetriever",onClick:()=>{T(e.response.retrieval.MultiQueryRetriever),I(!0)}})}),(0,t.jsx)(x.Z,{label:"点击查看完整响应",children:(0,t.jsx)(i.Z,{text:"完整响应",onClick:()=>{E(e.response),z(!0)}})})]})]})]})]},e.id)})})}),R&&(0,t.jsxs)(b.u_,{isOpen:!0,onClose:()=>z(!1),children:[(0,t.jsx)(m.Z,{}),(0,t.jsxs)(y.h,{children:[(0,t.jsx)(v.x,{children:"完整响应"}),(0,t.jsx)(f.o,{}),(0,t.jsx)(Z.f,{children:(0,t.jsx)("div",{className:"border bg-orange-50 px-2 py-3",children:(0,t.jsx)(k.Z,{src:D,theme:"atom"})})}),(0,t.jsx)(w.m,{children:(0,t.jsx)(c.z,{border:"1px",borderColor:"gray.200",onClick:()=>z(!1),children:"关闭"})})]})]}),M&&(0,t.jsxs)(b.u_,{isOpen:!0,onClose:()=>Q(!1),children:[(0,t.jsx)(m.Z,{}),(0,t.jsxs)(y.h,{children:[(0,t.jsx)(v.x,{children:"请输入期望的答案"}),(0,t.jsx)(f.o,{}),(0,t.jsx)(Z.f,{children:(0,t.jsx)("textarea",{className:"h-64 border bg-orange-50 w-full",placeholder:"请输入期望的答案......"})}),(0,t.jsx)(w.m,{children:(0,t.jsx)(c.z,{border:"1px",borderColor:"gray.200",onClick:()=>Q(!1),children:"确认"})})]})]}),H&&(0,t.jsxs)(b.u_,{isOpen:!0,onClose:()=>I(!1),children:[(0,t.jsx)(m.Z,{}),(0,t.jsxs)(y.h,{children:[(0,t.jsx)(v.x,{children:"详细数据"}),(0,t.jsx)(f.o,{}),(0,t.jsx)(Z.f,{children:(0,t.jsx)("div",{className:"border bg-orange-50 px-2 py-3",children:(0,t.jsx)(k.Z,{src:O,theme:"atom"})})}),(0,t.jsx)(w.m,{children:(0,t.jsx)(c.z,{border:"1px",borderColor:"gray.200",onClick:()=>I(!1),children:"确认"})})]})]})]})}},37600:function(e,r,s){var t=s(57437);s(2265),r.Z=e=>{let{text:r,...s}=e;return(0,t.jsx)("div",{className:"rounded border border-solid border-red-400 text-red-400 text-center text-xs px-1.5 py-0.5",...s,children:r})}},19734:function(e,r,s){var t=s(57437);s(2265);var n=s(14348);r.Z=e=>{let{children:r,shouldWrapChildren:s=!0,...l}=e;return(0,t.jsx)(n.u,{fontSize:12,bg:"white",arrowShadowColor:"rgba(0,0,0,0.02)",hasArrow:!0,arrowSize:12,offset:[-15,15],color:"gray.900",px:3,py:2,borderRadius:"8px",whiteSpace:"pre-wrap",boxShadow:"2px 2px 10px rgba(0,0,0,0.2)",shouldWrapChildren:s,...l,children:r})}},32721:function(e,r,s){var t=s(57437),n=s(2265),l=s(49236),a=s(98809),i=s(73621),o=s(95462);r.Z=(0,n.memo)(function(e){let{children:r,className:s="",...n}=e;return(0,t.jsx)(l.U,{components:{code(e){var r;let{node:s,inline:n,className:l,children:a,...c}=e,x=/language-(\w+)/.exec(l||"");return n?(0,t.jsx)("code",{...c,className:l,children:a}):(0,t.jsx)(i.Z,{...c,style:o.Z,language:null!==(r=null==x?void 0:x[1])&&void 0!==r?r:"",PreTag:"div",children:String(a).replace(/\n$/,"")})}},remarkPlugins:[a.Z],className:"whitespace-pre-wrap markdown prose dark:prose-invert ".concat(s),...n,children:r})})},72279:function(e,r,s){s.d(r,{Z:function(){return n}});var t=s(57437);function n(e){let{children:r,className:s="",icon:n,variant:l="default",...a}=e;return(0,t.jsxs)("button",{className:"inline-flex items-center min-w-[38px] min-h-[38px] rounded px-3 py-1.5\n            ".concat("default"===l?"text-gray-600 dark:text-gray-300 bg-gray-50 hover:bg-blue-100 dark:bg-gray-700 dark:hover:bg-gray-900":"outline"===l?"border border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300 bg-gray-50 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700":"primary"===l?"bg-primary-500 text-gray-200 hover:bg-primary-600 hover:text-blue-600":"text-black dark:text-gray-300 bg-transparent hover:bg-gray-200 dark:hover:bg-gray-700","\n            ").concat(s),...a,children:[n&&(0,t.jsx)(n,{className:"text-lg ".concat(r?"mr-1":"")}),r]})}}}]);